<?xml version="1.0" encoding="UTF-8"?><!-- xslbook-base.xsl 0.1 Copyright (C) 2022 xslet project MIT License --><xsl:stylesheet xmlns:book="https://github.com/xslet/2020/xslbook" xmlns:do="https://github.com/xslet/2020/xsldo" xmlns:ut="https://github.com/xslet/2020/xslutil" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"><xsl:import href="xslutil.xsl"/><xsl:import href="xsldo.xsl"/><xsl:import href="xslbook-do.xsl"/><xsl:strip-space elements="*"/><xsl:param name="book:xsl_url"><xsl:call-template name="ut:get_xsl_url"/></xsl:param><xsl:param name="book:xsl_dir"><xsl:call-template name="ut:get_dir_from_url"><xsl:with-param name="url" select="$book:xsl_url"/></xsl:call-template></xsl:param><xsl:template match="desc" mode="xslbook-base"><xsl:param name="component_name"/><xsl:param name="chapter_index"/><xsl:param name="data_url"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><xsl:variable name="_id"><xsl:call-template name="book:get_id"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><div class="desc {$component_name}-desc"><xsl:attribute name="id"><xsl:value-of select="$_id"/></xsl:attribute><xsl:apply-templates select="child::node()[name() != 'attr']"><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="arg0" select="$chapter_index"/></xsl:apply-templates></div></xsl:template><xsl:template match="desc" mode="xslbook-do"><xsl:param name="component_name"/><xsl:param name="arg0"/><xsl:param name="data_url"/><xsl:param name="data_gid"/><xsl:param name="data_index"/><xsl:param name="data_indexes"/><xsl:param name="arg1"/><xsl:param name="arg2"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/></xsl:call-template></xsl:variable><xsl:variable name="_data_gid"><xsl:call-template name="book:get_data_gid"><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:variable name="_id"><xsl:call-template name="book:get_id"><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:call-template></xsl:variable><div class="desc {$component_name}-desc"><xsl:attribute name="id"><xsl:value-of select="$_id"/></xsl:attribute><xsl:apply-templates select="child::node()[name() != 'attr']"><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="data_gid" select="$_data_gid"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:apply-templates></div></xsl:template><xsl:template match="title" mode="xslbook-base"><xsl:param name="html_element"/><xsl:param name="component_name"/><xsl:param name="component_index"/><xsl:param name="chapter_index"/><xsl:param name="data_url"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><xsl:variable name="_id"><xsl:call-template name="book:get_id"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><xsl:element name="{$html_element}"><xsl:attribute name="id"><xsl:value-of select="$_id"/></xsl:attribute><xsl:attribute name="class"><xsl:value-of select="concat('title ', $component_name, '-title')"/></xsl:attribute><xsl:value-of select="$component_index"/><xsl:apply-templates select="child::node()[name() != 'attr']"><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="arg0" select="$chapter_index"/></xsl:apply-templates></xsl:element></xsl:template><xsl:template match="title" mode="xslbook-do"><xsl:param name="html_element"/><xsl:param name="component_name"/><xsl:param name="component_index"/><xsl:param name="arg0"/><xsl:param name="data_url"/><xsl:param name="data_gid"/><xsl:param name="data_index"/><xsl:param name="data_indexes"/><xsl:param name="arg1"/><xsl:param name="arg2"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/></xsl:call-template></xsl:variable><xsl:variable name="_data_gid"><xsl:call-template name="book:get_data_gid"><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:variable name="_id"><xsl:call-template name="book:get_id"><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:call-template></xsl:variable><xsl:element name="{$html_element}"><xsl:attribute name="id"><xsl:value-of select="$_id"/></xsl:attribute><xsl:attribute name="class"><xsl:value-of select="concat('title ', $component_name, '-title')"/></xsl:attribute><xsl:value-of select="$component_index"/><xsl:apply-templates select="child::node()[name() != 'attr']"><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="data_gid" select="$_data_gid"/><xsl:with-param name="data_index" select="$_data_index"/><xsl:with-param name="data_indexes" select="$_data_indexes"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:apply-templates></xsl:element></xsl:template><xsl:template name="book:get_id"><xsl:param name="data_url"/><xsl:param name="data_gid"/><xsl:param name="data_index"/><xsl:param name="data_indexes"/><xsl:param name="arg0"/><xsl:param name="arg1"/><xsl:param name="arg2"/><xsl:variable name="_id"><xsl:call-template name="book:get_attr"><xsl:with-param name="name">id</xsl:with-param><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/><xsl:with-param name="data_index" select="$data_index"/><xsl:with-param name="data_indexes" select="$data_indexes"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="string-length($_id) != 0"><xsl:value-of select="$_id"/></xsl:when><xsl:otherwise><xsl:text>idxbk</xsl:text><xsl:variable name="_tag_name" select="local-name()"/><xsl:value-of select="$_tag_name"/><xsl:number level="any" format="1" count="*[name() = $_tag_name]"/></xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet>